{"ast":null,"code":"import _slicedToArray from\"/Users/chirag_vaid/Desktop/Pesto/team-anil-rao-p8-team-anil-rao/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from\"react\";import{connect}from\"react-redux\";import\"../Css/utils.css\";import\"../Css/VideoPlayer.css\";import Hls from\"hls.js\";import BackIcn from\"../assets/back.png\";import FullScreenIcn from\"../assets/player-icons/fullscreen.png\";import PlayIcn from\"../assets/player-icons/play.png\";import PauseIcn from\"../assets/player-icons/pause.png\";import SettingIcn from\"../assets/player-icons/setting.png\";import VolumeIcn from\"../assets/player-icons/volume.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VideoPlayer=function VideoPlayer(_ref){var _ref$style=_ref.style,style=_ref$style===void 0?{}:_ref$style,_ref$onBackPressedFun=_ref.onBackPressedFunc,onBackPressedFunc=_ref$onBackPressedFun===void 0?function(){}:_ref$onBackPressedFun,_ref$contentData=_ref.contentData,contentData=_ref$contentData===void 0?{}:_ref$contentData;var playerRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),play=_useState2[0],setPlay=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),duration=_useState4[0],setDuration=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentTime=_useState6[0],setCurrentTime=_useState6[1];useEffect(function(){var video=document.getElementById('video');var hls=new Hls();console.log(\"contentData IS -> \",contentData);// const videoSrc = `https://hls-test.moneyyapp.in/videos-output/${data.fileEndpoint}/360.m3u8`;             \nvar videoSrc=\"fileUrl\"in contentData?contentData.fileUrl:\"https://online-streaming-service-backend.moneyyapp.in/videos-output/\".concat(contentData===null||contentData===void 0?void 0:contentData.contentFileEndpoint,\"/360.m3u8\");hls.loadSource(videoSrc);hls.attachMedia(video);hls.on(Hls.Events.MANIFEST_PARSED,function(){// video.play(); \n});},[]);useEffect(function(){if(play){playerRef.current.play();}else{playerRef.current.pause();}},[play]);return/*#__PURE__*/_jsxs(\"div\",{className:\"video-player-cont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-butt\",onClick:function onClick(){console.log(\"BACK BUTTON PRESSED!!\");onBackPressedFunc();},children:/*#__PURE__*/_jsx(\"img\",{src:BackIcn})}),/*#__PURE__*/_jsx(\"video\",{id:\"video\",ref:playerRef,controls:true,style:{width:\"100%\",height:\"100%\"}// onLoadedMetadata={() => {\n//   const video = playerRef.current;\n//   if (!video) return;\n//   setDuration(video.duration)\n// }}\n// onTimeUpdate={(val) => {\n//   console.log(\"VALUE IS ->\",val.timeStamp)\n//   setCurrentTime((val.timeStamp)/3600)\n// }}\n})]});};var mapStateToProps=function mapStateToProps(state){return{//Here State.post is\n//Coming From -> \"./reducers/index.js\"\n//where \"item\" is defined under combineReducers\nappData:state.appData};};export default connect(mapStateToProps,{})(VideoPlayer);","map":{"version":3,"names":["React","useEffect","useRef","useState","connect","Hls","BackIcn","FullScreenIcn","PlayIcn","PauseIcn","SettingIcn","VolumeIcn","jsx","_jsx","jsxs","_jsxs","VideoPlayer","_ref","_ref$style","style","_ref$onBackPressedFun","onBackPressedFunc","_ref$contentData","contentData","playerRef","_useState","_useState2","_slicedToArray","play","setPlay","_useState3","_useState4","duration","setDuration","_useState5","_useState6","currentTime","setCurrentTime","video","document","getElementById","hls","console","log","videoSrc","fileUrl","concat","contentFileEndpoint","loadSource","attachMedia","on","Events","MANIFEST_PARSED","current","pause","className","children","onClick","src","id","ref","controls","width","height","mapStateToProps","state","appData"],"sources":["/Users/chirag_vaid/Desktop/Pesto/team-anil-rao-p8-team-anil-rao/src/Pages/VideoPlayer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"../Css/utils.css\";\nimport \"../Css/VideoPlayer.css\";\nimport Hls from \"hls.js\";\nimport BackIcn from \"../assets/back.png\";\n\nimport FullScreenIcn from \"../assets/player-icons/fullscreen.png\";\nimport PlayIcn from \"../assets/player-icons/play.png\";\nimport PauseIcn from \"../assets/player-icons/pause.png\";\nimport SettingIcn from \"../assets/player-icons/setting.png\";\nimport VolumeIcn from \"../assets/player-icons/volume.png\";\n\n\n\nconst VideoPlayer = ({style={},onBackPressedFunc=() => {},contentData={}}) => {\n  const playerRef = useRef()\n  const [play,setPlay] = useState(false);\n  const [duration,setDuration] = useState(0);\n  const [currentTime,setCurrentTime] = useState(0);\n\n  useEffect(() => {\n    const video = document.getElementById('video');\n    const hls = new Hls();\n    console.log(\"contentData IS -> \",contentData)\n    // const videoSrc = `https://hls-test.moneyyapp.in/videos-output/${data.fileEndpoint}/360.m3u8`;             \n    const videoSrc = \"fileUrl\" in contentData ? contentData.fileUrl : `https://online-streaming-service-backend.moneyyapp.in/videos-output/${contentData?.contentFileEndpoint}/360.m3u8`;             \n    hls.loadSource(videoSrc);\n    hls.attachMedia(video);\n    hls.on(Hls.Events.MANIFEST_PARSED, function() { \n      // video.play(); \n    });\n  },[])\n  useEffect(( ) => {\n    if(play)\n    {\n      playerRef.current.play()\n    }\n    else\n    {\n      playerRef.current.pause()\n    }\n  },[play])\n  return(\n    <div className=\"video-player-cont\">\n      {/* BACK BUTTON */}\n      <div className=\"back-butt\" onClick={() => {\n        console.log(\"BACK BUTTON PRESSED!!\")\n        onBackPressedFunc();\n      }}>\n        <img src={BackIcn}/>\n      </div>\n      <video id=\"video\" ref={playerRef} controls style={{width:\"100%\",height:\"100%\"}}\n        // onLoadedMetadata={() => {\n        //   const video = playerRef.current;\n        //   if (!video) return;\n        //   setDuration(video.duration)\n        // }}\n        \n        // onTimeUpdate={(val) => {\n        //   console.log(\"VALUE IS ->\",val.timeStamp)\n        //   setCurrentTime((val.timeStamp)/3600)\n        // }}\n      />\n      {/* PLAYER CONTROLS */}\n      {/* <div className=\"players-controls-cont dsp-flx-rw\">\n        <div className=\"dsp-flx-rw\">\n          <img src={play ? PauseIcn : PlayIcn} className=\"player-icns\" onClick={() => {\n            setPlay(!play)\n          }}/>\n        </div>\n        <div className=\"slider-cont dsp-flx-rw\">\n          <input \n            type=\"range\"\n            className=\"slider\"\n          />\n          <p className=\"mrg-0 fnt-sz-3 clr-white fnt-wt-700\">{Math.floor((Math.floor(currentTime/60))/60)}:{Math.floor((Math.floor(currentTime/60))%60)}:{Math.floor(currentTime%60)} / {Math.floor((Math.floor(duration/60))/60)}:{Math.floor((Math.floor(duration/60))%60)}:{Math.floor(duration%60)}</p>\n        </div>\n\n        <div className=\"dsp-flx-rw plyr-right-icns \">\n          <img src={VolumeIcn} className=\"player-icns\"/>\n          <img src={SettingIcn} className=\"player-icns\"/>\n          <img src={FullScreenIcn} className=\"player-icns\"/>\n        </div>\n        \n      </div> */}\n    </div>\n  )\n}\nconst mapStateToProps = (state) => {\n  return {\n    //Here State.post is\n    //Coming From -> \"./reducers/index.js\"\n    //where \"item\" is defined under combineReducers\n    appData: state.appData,\n  };\n};\n\nexport default connect(mapStateToProps, {})(VideoPlayer);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}