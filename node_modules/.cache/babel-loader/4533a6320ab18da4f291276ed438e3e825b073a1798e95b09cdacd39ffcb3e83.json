{"ast":null,"code":"import _classCallCheck from \"/Users/chirag_vaid/Desktop/Pesto/team-anil-rao-p8-team-anil-rao/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/chirag_vaid/Desktop/Pesto/team-anil-rao-p8-team-anil-rao/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { isThenable } from './is.js';\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n\n/** SyncPromise internal states */\nvar States;\n(function (States) {\n  /** Pending */\n  var PENDING = 0;\n  States[States[\"PENDING\"] = PENDING] = \"PENDING\";\n  /** Resolved / OK */\n  var RESOLVED = 1;\n  States[States[\"RESOLVED\"] = RESOLVED] = \"RESOLVED\";\n  /** Rejected / Error */\n  var REJECTED = 2;\n  States[States[\"REJECTED\"] = REJECTED] = \"REJECTED\";\n})(States || (States = {}));\n\n// Overloads so we can call resolvedSyncPromise without arguments and generic argument\n\n/**\n * Creates a resolved sync promise.\n *\n * @param value the value to resolve the promise with\n * @returns the resolved sync promise\n */\nfunction resolvedSyncPromise(value) {\n  return new SyncPromise(function (resolve) {\n    resolve(value);\n  });\n}\n\n/**\n * Creates a rejected sync promise.\n *\n * @param value the value to reject the promise with\n * @returns the rejected sync promise\n */\nfunction rejectedSyncPromise(reason) {\n  return new SyncPromise(function (_, reject) {\n    reject(reason);\n  });\n}\n\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\nvar SyncPromise = /*#__PURE__*/function () {\n  function SyncPromise(executor) {\n    _classCallCheck(this, SyncPromise);\n    SyncPromise.prototype.__init.call(this);\n    SyncPromise.prototype.__init2.call(this);\n    SyncPromise.prototype.__init3.call(this);\n    SyncPromise.prototype.__init4.call(this);\n    SyncPromise.prototype.__init5.call(this);\n    SyncPromise.prototype.__init6.call(this);\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n\n  /** JSDoc */\n  _createClass(SyncPromise, [{\n    key: \"__init\",\n    value: function __init() {\n      this._state = States.PENDING;\n    }\n  }, {\n    key: \"__init2\",\n    value: function __init2() {\n      this._handlers = [];\n    }\n  }, {\n    key: \"then\",\n    value: function then(onfulfilled, onrejected) {\n      var _this = this;\n      return new SyncPromise(function (resolve, reject) {\n        _this._handlers.push([false, function (result) {\n          if (!onfulfilled) {\n            // TODO: ¯\\_(ツ)_/¯\n            // TODO: FIXME\n            resolve(result);\n          } else {\n            try {\n              resolve(onfulfilled(result));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        }, function (reason) {\n          if (!onrejected) {\n            reject(reason);\n          } else {\n            try {\n              resolve(onrejected(reason));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        }]);\n        _this._executeHandlers();\n      });\n    }\n\n    /** JSDoc */\n  }, {\n    key: \"catch\",\n    value: function _catch(onrejected) {\n      return this.then(function (val) {\n        return val;\n      }, onrejected);\n    }\n\n    /** JSDoc */\n  }, {\n    key: \"finally\",\n    value: function _finally(onfinally) {\n      var _this2 = this;\n      return new SyncPromise(function (resolve, reject) {\n        var val;\n        var isRejected;\n        return _this2.then(function (value) {\n          isRejected = false;\n          val = value;\n          if (onfinally) {\n            onfinally();\n          }\n        }, function (reason) {\n          isRejected = true;\n          val = reason;\n          if (onfinally) {\n            onfinally();\n          }\n        }).then(function () {\n          if (isRejected) {\n            reject(val);\n            return;\n          }\n          resolve(val);\n        });\n      });\n    }\n\n    /** JSDoc */\n  }, {\n    key: \"__init3\",\n    value: function __init3() {\n      var _this3 = this;\n      this._resolve = function (value) {\n        _this3._setResult(States.RESOLVED, value);\n      };\n    }\n\n    /** JSDoc */\n  }, {\n    key: \"__init4\",\n    value: function __init4() {\n      var _this4 = this;\n      this._reject = function (reason) {\n        _this4._setResult(States.REJECTED, reason);\n      };\n    }\n\n    /** JSDoc */\n  }, {\n    key: \"__init5\",\n    value: function __init5() {\n      var _this5 = this;\n      this._setResult = function (state, value) {\n        if (_this5._state !== States.PENDING) {\n          return;\n        }\n        if (isThenable(value)) {\n          void value.then(_this5._resolve, _this5._reject);\n          return;\n        }\n        _this5._state = state;\n        _this5._value = value;\n        _this5._executeHandlers();\n      };\n    }\n\n    /** JSDoc */\n  }, {\n    key: \"__init6\",\n    value: function __init6() {\n      var _this6 = this;\n      this._executeHandlers = function () {\n        if (_this6._state === States.PENDING) {\n          return;\n        }\n        var cachedHandlers = _this6._handlers.slice();\n        _this6._handlers = [];\n        cachedHandlers.forEach(function (handler) {\n          if (handler[0]) {\n            return;\n          }\n          if (_this6._state === States.RESOLVED) {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            handler[1](_this6._value);\n          }\n          if (_this6._state === States.REJECTED) {\n            handler[2](_this6._value);\n          }\n          handler[0] = true;\n        });\n      };\n    }\n  }]);\n  return SyncPromise;\n}();\nexport { SyncPromise, rejectedSyncPromise, resolvedSyncPromise };","map":{"version":3,"names":["States","PENDING","RESOLVED","REJECTED","resolvedSyncPromise","value","SyncPromise","resolve","rejectedSyncPromise","reason","_","reject","executor","_classCallCheck","prototype","__init","call","__init2","__init3","__init4","__init5","__init6","_resolve","_reject","e","_createClass","key","_state","_handlers","then","onfulfilled","onrejected","_this","push","result","_executeHandlers","_catch","val","_finally","onfinally","_this2","isRejected","_this3","_setResult","_this4","_this5","state","isThenable","_value","_this6","cachedHandlers","slice","forEach","handler"],"sources":["/Users/chirag_vaid/Desktop/Pesto/team-anil-rao-p8-team-anil-rao/node_modules/@sentry/src/syncpromise.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/typedef */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isThenable } from './is';\n\n/** SyncPromise internal states */\nconst enum States {\n  /** Pending */\n  PENDING = 0,\n  /** Resolved / OK */\n  RESOLVED = 1,\n  /** Rejected / Error */\n  REJECTED = 2,\n}\n\n// Overloads so we can call resolvedSyncPromise without arguments and generic argument\nexport function resolvedSyncPromise(): PromiseLike<void>;\nexport function resolvedSyncPromise<T>(value: T | PromiseLike<T>): PromiseLike<T>;\n\n/**\n * Creates a resolved sync promise.\n *\n * @param value the value to resolve the promise with\n * @returns the resolved sync promise\n */\nexport function resolvedSyncPromise<T>(value?: T | PromiseLike<T>): PromiseLike<T> {\n  return new SyncPromise(resolve => {\n    resolve(value);\n  });\n}\n\n/**\n * Creates a rejected sync promise.\n *\n * @param value the value to reject the promise with\n * @returns the rejected sync promise\n */\nexport function rejectedSyncPromise<T = never>(reason?: any): PromiseLike<T> {\n  return new SyncPromise((_, reject) => {\n    reject(reason);\n  });\n}\n\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\nclass SyncPromise<T> implements PromiseLike<T> {\n  private _state: States = States.PENDING;\n  private _handlers: Array<[boolean, (value: T) => void, (reason: any) => any]> = [];\n  private _value: any;\n\n  public constructor(\n    executor: (resolve: (value?: T | PromiseLike<T> | null) => void, reject: (reason?: any) => void) => void,\n  ) {\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n\n  /** JSDoc */\n  public then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | null,\n  ): PromiseLike<TResult1 | TResult2> {\n    return new SyncPromise((resolve, reject) => {\n      this._handlers.push([\n        false,\n        result => {\n          if (!onfulfilled) {\n            // TODO: ¯\\_(ツ)_/¯\n            // TODO: FIXME\n            resolve(result as any);\n          } else {\n            try {\n              resolve(onfulfilled(result));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n        reason => {\n          if (!onrejected) {\n            reject(reason);\n          } else {\n            try {\n              resolve(onrejected(reason));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n      ]);\n      this._executeHandlers();\n    });\n  }\n\n  /** JSDoc */\n  public catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | null,\n  ): PromiseLike<T | TResult> {\n    return this.then(val => val, onrejected);\n  }\n\n  /** JSDoc */\n  public finally<TResult>(onfinally?: (() => void) | null): PromiseLike<TResult> {\n    return new SyncPromise<TResult>((resolve, reject) => {\n      let val: TResult | any;\n      let isRejected: boolean;\n\n      return this.then(\n        value => {\n          isRejected = false;\n          val = value;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n        reason => {\n          isRejected = true;\n          val = reason;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n      ).then(() => {\n        if (isRejected) {\n          reject(val);\n          return;\n        }\n\n        resolve(val as unknown as any);\n      });\n    });\n  }\n\n  /** JSDoc */\n  private readonly _resolve = (value?: T | PromiseLike<T> | null) => {\n    this._setResult(States.RESOLVED, value);\n  };\n\n  /** JSDoc */\n  private readonly _reject = (reason?: any) => {\n    this._setResult(States.REJECTED, reason);\n  };\n\n  /** JSDoc */\n  private readonly _setResult = (state: States, value?: T | PromiseLike<T> | any) => {\n    if (this._state !== States.PENDING) {\n      return;\n    }\n\n    if (isThenable(value)) {\n      void (value as PromiseLike<T>).then(this._resolve, this._reject);\n      return;\n    }\n\n    this._state = state;\n    this._value = value;\n\n    this._executeHandlers();\n  };\n\n  /** JSDoc */\n  private readonly _executeHandlers = () => {\n    if (this._state === States.PENDING) {\n      return;\n    }\n\n    const cachedHandlers = this._handlers.slice();\n    this._handlers = [];\n\n    cachedHandlers.forEach(handler => {\n      if (handler[0]) {\n        return;\n      }\n\n      if (this._state === States.RESOLVED) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        handler[1](this._value as unknown as any);\n      }\n\n      if (this._state === States.REJECTED) {\n        handler[2](this._value);\n      }\n\n      handler[0] = true;\n    });\n  };\n}\n\nexport { SyncPromise };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}